import{x as q,u as C,v as M,a as f,d as l,w as t,b as V,f as N,r as s,e as S,g as i,E as u,o as m}from"./index-D41mdhcm.js";import{r as _}from"./request-Hp9FWL9u.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";const R={class:"card1"},j={style:{width:"100%",display:"flex","justify-content":"center","margin-bottom":"20px"}},A=["src"],T={key:0},z={style:{"text-align":"center"}},D={__name:"Person",emits:["updateUser"],setup(F,{emit:b}){const x=q(),p=C(),e=M({user:p.user,form:{},rules:{username:[{required:!0,message:"请输入账号",trigger:"blur"}],name:[{required:!0,message:"请输入名称",trigger:"blur"}],no:[{required:!0,message:"请输入工号",trigger:"blur"}]}}),v=r=>{e.form.avatar=r.data},c=b;e.user.role==="EMP"?_.get("/employee/selectById/"+e.user.id).then(r=>{e.form=r.data}):e.form=e.user;const y=()=>{e.user.role==="EMP"?_.put("/employee/update",e.form).then(r=>{r.code==="200"?(u.success("更新操作成功啦"),p.updateUser(e.form),c("updateUser")):u.error(r.msg)}):_.put("/admin/update",e.form).then(r=>{r.code==="200"?(u.success("更新操作成功啦"),p.updateUser(e.form),c("updateUser")):u.error(r.msg)})};return(r,o)=>{const U=s("Plus"),k=s("el-icon"),w=s("el-upload"),n=s("el-input"),d=s("el-form-item"),g=s("el-radio"),P=s("el-radio-group"),E=s("el-input-number"),h=s("el-button"),B=s("el-form");return m(),f("div",R,[l(B,{ref_key:"formRef",ref:x,rules:e.rules,model:e.form,"label-width":"80px",style:{"padding-right":"40px","padding-top":"20px"}},{default:t(()=>[V("div",j,[l(w,{class:"avatar-uploader",action:"http://localhost:8080/files/upload","show-file-list":!1,"on-success":v},{default:t(()=>[e.form.avatar?(m(),f("img",{key:0,src:e.form.avatar,class:"avatar"},null,8,A)):(m(),S(k,{key:1,class:"avatar-uploader-icon"},{default:t(()=>[l(U)]),_:1}))]),_:1})]),l(d,{label:"账号",prop:"username"},{default:t(()=>[l(n,{disabled:"",modelValue:e.form.username,"onUpdate:modelValue":o[0]||(o[0]=a=>e.form.username=a),autocomplete:"off",placeholder:"请输入账号"},null,8,["modelValue"])]),_:1}),l(d,{label:"名称",prop:"name"},{default:t(()=>[l(n,{modelValue:e.form.name,"onUpdate:modelValue":o[1]||(o[1]=a=>e.form.name=a),autocomplete:"off",placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),e.user.role==="EMP"?(m(),f("div",T,[l(d,{label:"性别"},{default:t(()=>[l(P,{modelValue:e.form.sex,"onUpdate:modelValue":o[2]||(o[2]=a=>e.form.sex=a)},{default:t(()=>[l(g,{label:"男",value:"男"},{default:t(()=>o[6]||(o[6]=[i("男",-1)])),_:1,__:[6]}),l(g,{label:"女",value:"女"},{default:t(()=>o[7]||(o[7]=[i("女",-1)])),_:1,__:[7]})]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"工号",prop:"no"},{default:t(()=>[l(n,{disabled:"",modelValue:e.form.no,"onUpdate:modelValue":o[3]||(o[3]=a=>e.form.no=a),autocomplete:"off",placeholder:"请输入工号"},null,8,["modelValue"])]),_:1}),l(d,{label:"年龄"},{default:t(()=>[l(E,{style:{width:"180px"},min:18,max:35,modelValue:e.form.age,"onUpdate:modelValue":o[4]||(o[4]=a=>e.form.age=a),autocomplete:"off",placeholder:"请输入年龄"},null,8,["modelValue"])]),_:1}),l(d,{label:"个人介绍"},{default:t(()=>[l(n,{rows:4,type:"textarea",modelValue:e.form.description,"onUpdate:modelValue":o[5]||(o[5]=a=>e.form.description=a),autocomplete:"off",placeholder:"请输入个人介绍"},null,8,["modelValue"])]),_:1})])):N("",!0),V("div",z,[l(h,{type:"primary",onClick:y,style:{padding:"20px 30px"}},{default:t(()=>o[8]||(o[8]=[i("更新个人信息",-1)])),_:1,__:[8]})])]),_:1},8,["rules","model"])])}}},K=I(D,[["__scopeId","data-v-badd9c1e"]]);export{K as default};
